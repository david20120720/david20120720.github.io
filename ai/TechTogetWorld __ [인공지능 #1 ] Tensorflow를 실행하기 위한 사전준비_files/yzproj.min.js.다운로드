var yzpos=0;var yzdiv=0;$(document).ready(function(){if($("div.article").length>0){var cont=$("div.article").html();var e='';var c=cont.indexOf(e);if(c>0){$("#yz_a_bot").show();}else{e='//cfile';c=cont.indexOf(e);if(c>0){$("#yz_a_bot").show();}}$("iframe, embed").each(function(){var url=$(this).attr("src");if(url.search(/\?/)===-1){$(this).attr("src",url+"?wmode=opaque");}else{$(this).attr("src",url+"&wmode=opaque");}});$(document).keydown(function(event){if(event.keyCode!=27)return true;if($("div#yz_div").length>0){onyzp();}return false;});}});function onyzl(){$("div#yz_div .list").toggleClass("dno");}function onyzy(idx){var html='<object><param name="movie" value="http://www.youtube.com/v/'+idx;html+='?version=3&showinfo=0&autoplay=0&feature=pwlayer_embedded&theme=light&color=white"><param name="allowFullScreen" value="true"><param name="allowScriptAccess" value="always"><embed src="http://www.youtube.com/v/'+idx;html+='?autoplay=0&showinfo=0&version=3&feature=pwlayer_embedded&theme=light&color=white" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always"></object>';$("div#yz_div #yt_cont").html(html);}function onyzi(src){var img=new Image();img.src=src;var wh=$(window).height();var ww=$(window).width();var l=img.width/2;var t=img.height/2;var w='auto';var h='auto';if(wh<=img.height){h=wh+"px";t=wh/2;var ratio=wh/img.height;l=(img.width*ratio)/2;}else if(ww<=img.width){w=ww+"px";l=ww/2;var ratio=ww/img.width;t=(img.height*ratio)/2;}html='<img src="'+src+'" style="margin-left:-'+l+'px;margin-top:-'+t+'px;width:'+w+';height:'+h+'" />';$("div#yz_div #yt_cont").html(html);}function onyzq(t){$("div#yz_div .list img.on").removeClass("on");t.addClass("on");yzpos=$("div#yz_div .list img").index(t);}function onyzn(){var im=$("div#yz_div .list img.on").next();if(im.length<=0){im=$("div#yz_div .list img").eq(0);}onyzchk(im);im.click();}function onyzr(t){var im=$("div#yz_div .list img.on").prev();if(im.length<=0){im=$("div#yz_div .list img:last");}onyzchk(im);im.click();}function onyzchk(th){var t=th.position().top+"px";$('div#yz_div .list').slimScroll({scrollBy:t});}function onyzp(){if($("div#yz_div").length==0){var title=document.title;var content=$("div.article").html();var iframe;var html='<div id="yz_div"><div class="bg" onclick="onyzb()">';var imgd="";var prev="";title=title.substring(title.indexOf("::")+2,title.length)
var st=0;var ww=$(window).width();var wh=$(window).height();var en=content.length;var i=0;while(i<50&&st<en){var e='youtube.com/';var c=content.indexOf(e,st);if(c>0){c=content.indexOf("/",c+13)+1;}else{break;}var l=content.indexOf("?",c);if(l<0||l-c>20){l=content.indexOf("&",c);}if(l<0||l-c>20){l=content.indexOf('"',c);}var idx=content.substring(c,l);st=l+1;i++;if(idx==prev){continue;}if(idx.length>0){imgd+='<img src="http://i2.ytimg.com/vi/'+idx+'/default.jpg" st="'+st+'" onclick="onyzy(\''+idx+'\');onyzq($(this))" class="youtube" />';prev=idx;}}i=0;st=0;while(i<50&&st<en){var e="//cfile";var c=content.indexOf(e,st);if(c<0){break;}var l=content.indexOf('"',c);var src=content.substring(c,l);src=src.replace('original',"C120x90");src=src.replace('image',"C120x90");st=l+1;i++;if(src==prev){continue;}if(src.length>0){imgd+='<img src="'+src+'" st="'+st+'" onclick="onyzi(\''+src.replace('C120x90',"image")+'\');onyzq($(this))" class="img" />';prev=src;}}var h=wh-127+"px";var w=(ww/2)-135+"px";html+='<div class="lwrap"><div class="list" style="height:'+h+'">';html+=imgd;html+='</div></div>';html+='<div id="yt_cont"></div>';html+='<a class="grid" href="javascript:onyzl();onyzq($(this))" title="list on/off"><img src="http://cfs.tistory.com/custom/blog/149/1491962/skin/images/grid.png"></a>';html+='<a class="next" href="javascript:onyzn()" ><img src="http://cfs.tistory.com/custom/blog/149/1491962/skin/images/next_32.png"></a>';html+='<a class="prev" href="javascript:onyzr()" ><img src="http://cfs.tistory.com/custom/blog/149/1491962/skin/images/prev_32.png"></a>';html+='<a class="dlf" onclick="onyzr()"></a>';html+='<a class="dlr" onclick="onyzn()" style="width:'+w+'"></a>';html+='</div></div>';$('body').append(html);$('html').css('overflow-y','hidden');var elems=$('div#yz_div .list').children('img').remove();elems.sort(function(a,b){return parseInt($(a).attr("st"))>parseInt($(b).attr("st"));});$('div#yz_div .list').append(elems);$('div#yz_div .list img:last').addClass("last");$('div#yz_div .list').slimScroll({height:h,color:'#fafafa'});$("div#yz_div .list img").eq(yzpos).click();}else{$("div#yz_div").remove();$('html').css('overflow-y','auto');}}